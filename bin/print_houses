#!/usr/bin/env python
# coding=utf-8

import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(os.path.realpath(__file__))))

from homerun import storage

def print_house(data):
    print data["title"].encode("utf-8")
    print data["url"].encode("utf-8")
    print "Price: %.2f€" % data["price"]
    print "Rooms: %.2f" % data["rooms"]
    print "Living area: %.2fm²" % data["living_area"]
    if data["plot_area"] != 0:
        print "Plot area: %.2fm²" % data["plot_area"]

def print_houses(houses):
    for house in houses:
        print_house(house)
        if house != houses[-1]:
            print

if __name__ == "__main__":
    houses = storage.load_houses()
    houses = sorted(houses, key=lambda key: key["price"])

    old_houses = filter(lambda house: "new" in house, houses)
    new_houses = filter(lambda house: not "new" in house, houses)

    print_houses(old_houses)
    if len(old_houses) > 0:
        print
    print "New:"
    print
    print_houses(new_houses)
